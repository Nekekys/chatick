(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{104:function(e,a,t){e.exports=t(221)},109:function(e,a,t){},13:function(e,a,t){},221:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(51),c=t.n(r),u=(t(109),t(17)),o=t(18),i=t(20),m=t(19),l=(t(13),t(36)),d=t.n(l);var p=function(e){return s.a.createElement("div",{className:"Header"},s.a.createElement("div",{className:"Header_main"},s.a.createElement("div",{className:"logo"},s.a.createElement("img",{src:d.a,alt:""})),s.a.createElement("div",{className:"slogan"},s.a.createElement("b",null,e.userName," "),"   / \u0427\u0435\u0431\u0443\u0440\u0435\u0447\u043d\u044b\u0439 \u0447\u0430\u0442\u0438\u043a")))};var g=function(e){return s.a.createElement("div",{className:"MessageMe_container"},s.a.createElement("div",{className:"MessageMe"},s.a.createElement("div",{className:"Message_name"},s.a.createElement("h4",null,e.name),s.a.createElement("span",null,e.date)),s.a.createElement("p",null,e.message)))};var h=function(e){return s.a.createElement("div",{className:"Message_container"},s.a.createElement("div",{className:"Message"},s.a.createElement("div",{className:"Message_name"},s.a.createElement("h4",null,e.name),s.a.createElement("span",null,e.date)),s.a.createElement("p",null,e.message)))};var v=function(e){var a=e.messageData.map((function(a){return a.id==e.userKey.uid?s.a.createElement(g,{name:a.nameUser,id:a.id,message:a.messageText,date:a.dateMassage}):s.a.createElement(h,{name:a.nameUser,id:a.id,message:a.messageText,date:a.dateMassage})}));return s.a.createElement("div",{className:"Okno",id:"dab"},a)},f=t(224),E=t(223),b=t(8);var N=Object(E.a)({form:"message"})((function(e){return s.a.createElement("form",{className:"Vvod",onSubmit:e.handleSubmit},s.a.createElement("img",{onClick:function(){document.getElementById("dab").scrollTop+=1e4},src:d.a,alt:"",className:"vvod_pepe"}),s.a.createElement(f.a,{component:"textarea",name:"message",className:"vvod_vvod_input",type:"text"}),s.a.createElement("button",{className:"vvod_send"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))}));var O=function(e){return s.a.createElement(N,{onSubmit:function(a){if(null!=a.message){var t=e.userKey.uid,n=e.userName;e.sendMessageDB(a.message,t,n),a.message="";var s=document.getElementById("dab");setTimeout((function(){s.scrollTop+=1e4}),10)}}})},y=t(72),j=t.n(y),M=t(101),A=t(103),_=t(21),k={messageData:[],messagevvod:""},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SEND_MESSAGE":var t=a.message,n=a.id,s=a.name,r=a.date;return Object(_.a)(Object(_.a)({},e),{},{messageData:[].concat(Object(A.a)(e.messageData),[{id:n,nameUser:s,messageText:t,dateMassage:r}])});case"CLEAR_MAESSAGE":return Object(_.a)(Object(_.a)({},e),{},{messageData:[]});default:return e}};var S=function(e){return s.a.createElement("div",{className:"Chatick"},s.a.createElement(v,{messageData:e.messageData,userKey:e.userKey}),s.a.createElement(O,{sendMessage:e.sendMessage,sendMessageDB:e.sendMessageDB,userName:e.userName,userKey:e.userKey}))},w=t(5),I=t(10),U={isAuth:!1,user:[{uid:"1"}],userName:""},C=function(){return{type:"IS_AUTH"}},x=function(e){return{type:"SEND_USER",user:e}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"IS_AUTH":return{isAuth:!0};case"SEND_USER":return Object(_.a)(Object(_.a)({},e),{},{user:a.user});case"GET_USER_NAME":return Object(_.a)(Object(_.a)({},e),{},{userName:a.name});default:return e}},T=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){return Object(u.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.database().ref("Message").on("value",(function(a){e.kek(a.val())})),b.auth().onAuthStateChanged((function(a){e.props.sendUser(a)}))}},{key:"componentDidUpdate",value:function(e,a,t){var n=this;b.database().ref("User").on("value",(function(e){n.kek2(e.val())}))}},{key:"kek",value:function(e){for(var a in this.props.clearMessage(),e)this.props.sendMessage(e[a].messageText,e[a].userId,e[a].name,e[a].dateMassage)}},{key:"kek2",value:function(e){for(var a in e)a==this.props.userKey.uid&&this.props.getUserName(e[a].name)}},{key:"render",value:function(){return s.a.createElement(S,{messageData:this.props.messageData,sendMessage:this.props.sendMessage,sendMessageDB:this.props.sendMessageDB,userKey:this.props.userKey,userName:this.props.userName})}}]),t}(s.a.Component),B=Object(w.d)(Object(I.b)((function(e){return{messageData:e.MessageData.messageData,userKey:e.AuthData.user,userName:e.AuthData.userName}}),{sendMessage:function(e,a,t,n){return{type:"SEND_MESSAGE",message:e,id:a,name:t,date:n}},sendMessageDB:function(e,a,t){return function(){var n=Object(M.a)(j.a.mark((function n(s){var r,c,u,o,i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new Date,c=r.getHours(),u=r.getMinutes(),o=b.database(),i={userId:a,name:t,messageText:e,dateMassage:c+":"+u},n.next=7,o.ref("Message").push(i);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},isAuthChange:C,sendUser:x,clearMessage:function(){return{type:"CLEAR_MAESSAGE"}},getUserName:function(e){return{type:"GET_USER_NAME",name:e}}}))(T);var K=function(e){var a=e.users.map((function(a){return a==e.userName?s.a.createElement("span",null," ",s.a.createElement("b",null,a),"  "):s.a.createElement("span",null," ",a," ")}));return s.a.createElement("div",{className:"User"},s.a.createElement("h2",null,"\u0427\u0435\u0431\u0443\u0440\u0435\u0442\u044f\u043d\u0435:"),a)},R=t(73);var G=Object(E.a)({form:"loginIn"})((function(e){return s.a.createElement("form",{className:"LoginIn",onSubmit:e.handleSubmit},s.a.createElement("span",null,"\u041b\u043e\u0433\u0438\u043d:"),s.a.createElement(f.a,{component:"input",name:"login",className:"LoginIn_input_login",type:"text"}),s.a.createElement("span",null,"\u041f\u0430\u0440\u043e\u043b\u044c:"),s.a.createElement(f.a,{component:"input",name:"password",className:"LoginIn_input_password",type:"password"}),s.a.createElement("button",{className:"LoginIn_Button"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))}));var H=Object(E.a)({form:"Registr"})((function(e){return s.a.createElement("form",{className:"LoginIn",onSubmit:e.handleSubmit},s.a.createElement("span",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041f\u043e\u0447\u0442\u0443:"),s.a.createElement(f.a,{component:"input",name:"login",className:"LoginIn_input_login",type:"text"}),s.a.createElement("span",null,"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043d\u0438\u043a:"),s.a.createElement(f.a,{component:"input",name:"name",className:"LoginIn_input_mail",type:"text"}),s.a.createElement("span",null,"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),s.a.createElement(f.a,{component:"input",name:"password",className:"LoginIn_input_password",type:"password"}),s.a.createElement("button",{className:"LoginIn_Button"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))}));var W=function(e){var a=Object(n.useState)(!1),t=Object(R.a)(a,2),r=t[0],c=t[1],u=Object(n.useState)(!1),o=Object(R.a)(u,2),i=o[0],m=o[1],l=function(a){var t=a.login,n=a.password;b.auth().signInWithEmailAndPassword(t,n).then((function(a){console.log(a),e.isAuthChange()}))},d=function(a){var t=a.login,n=a.password,s=a.name;b.auth().createUserWithEmailAndPassword(t,n).then((function(a){console.log(a),e.isAuthChange()}));var r=[];b.auth().onAuthStateChanged((function(e){console.log(e),r=e}));setTimeout((function(){var e=r.uid;b.database().ref("User/"+e).set({name:s})}),2e3)};return s.a.createElement("div",{className:"Login"},s.a.createElement("div",{className:"login_con"},s.a.createElement("h1",null," ",i?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0417\u0430\u043b\u043e\u0433\u0438\u043d\u044c\u0441\u044f"),r&&s.a.createElement("div",{className:"error"},"\u0430\u0442\u0430\u0442\u0430 ",s.a.createElement("div",{className:"error_x",onClick:function(){c(!1)}},"x")),i?s.a.createElement(H,{onSubmit:function(e){var a=e.login,t=e.password,n=e.name;null!=a&&null!=t&&null!=n?d(e):c(!0)}}):s.a.createElement(G,{onSubmit:function(e){var a=e.login,t=e.password;null!=a&&null!=t?l(e):c(!0)}}),s.a.createElement("span",{onClick:function(){m(!i)}},i?"\u0412\u0445\u043e\u0434":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))},z=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){return Object(u.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(W,{isAuth:this.props.isAuth,isAuthChange:this.props.isAuthChange})}}]),t}(s.a.Component),P=Object(w.d)(Object(I.b)((function(e){return{isAuth:e.MessageData.isAuth}}),{isAuthChange:C}))(z),X=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){return Object(u.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement(p,{userName:this.props.userName})}}]),t}(s.a.Component),J=Object(w.d)(Object(I.b)((function(e){return{userName:e.AuthData.userName}}),{}))(X),V=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(u.a)(this,t),(n=a.call(this,e)).state={users:[]},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.database().ref("User").on("value",(function(a){e.proverOchka(a.val())}))}},{key:"proverOchka",value:function(e){var a=-1;for(var t in e)a++,this.state.users[a]=e[t].name}},{key:"render",value:function(){return s.a.createElement(K,{userName:this.props.userName,users:this.state.users})}}]),t}(s.a.Component),F=Object(w.d)(Object(I.b)((function(e){return{userName:e.AuthData.userName}}),{}))(V),$=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(u.a)(this,t),(n=a.call(this,e)).state={check:!1},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.auth().onAuthStateChanged((function(e){e&&a()}));var a=function(){e.setState({check:!0})}}},{key:"componentDidUpdate",value:function(e,a,t){1==this.state.check&&this.props.isAuthChange()}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"App_container"},s.a.createElement(J,null),this.props.isAuth?s.a.createElement(B,null):s.a.createElement(P,null),s.a.createElement(F,null)))}}]),t}(s.a.Component),q=Object(w.d)(Object(I.b)((function(e){return{isAuth:e.AuthData.isAuth}}),{isAuthChange:C,sendUser:x}))($);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=t(102),Y=t(225),Z=Object(w.c)({MessageData:D,AuthData:L,form:Y.a}),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||w.d,ae=Object(w.e)(Z,ee(Object(w.a)(Q.a)));window.store=ae;var te=ae;b.initializeApp({apiKey:"AIzaSyCDItrogtHgLsXn8IFUzkWSOf_OGnUnilc",authDomain:"my-chatik-ee6a9.firebaseapp.com",databaseURL:"https://my-chatik-ee6a9.firebaseio.com",projectId:"my-chatik-ee6a9",storageBucket:"my-chatik-ee6a9.appspot.com",messagingSenderId:"681904038831",appId:"1:681904038831:web:5d17cd004a5c09d40d855a"}),c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(I.a,{store:te},s.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,a,t){e.exports=t.p+"static/media/pepeclown.ea1f9ac3.png"}},[[104,1,2]]]);
//# sourceMappingURL=main.f38dd48e.chunk.js.map